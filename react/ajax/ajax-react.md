# React AJAX

У React нет каких либо конкретных способов получения данных. Фактически он не знает, что есть некий “сервер” с данными.

React просто приводит в какое либо состояние компонент(components), используя данные из двух свойств: `props` и `state`.

Чтобы пользоваться данными, которые вы получаетe с сервера, вам нужно получить их в свойства компонента, `props` или `state`.

# HTTP библиотеки:

- [axios](https://github.com/axios/axios) на promises
- [superagent](https://github.com/visionmedia/superagent) на callbacks
- [fetch](https://github.com/github/fetch) стандартное

# Четыре способа React AJAX

## 1. Корневой компонент

Это самый простой способ. Для прототипов и небольших приложений.

Создаёть один корневой (родительский) компонент, который отвечает за все AJAX запросы. Он хранит все данные AJAX ответов в своём состоянии и передаёт это состояние (или его часть) в дочерние компоненты в качестве свойств.

Когда использовать корневой компонент:

- У вас не глубокое дерево компонентов.
- Вы не используете Redux или Flux.

## 2. Контейнерные компоненты

Компонент-контейнер предоставляет данные и поведение презентационным компонентам или другим компонентам-контейнерам.

Для каждого презентационного компонента, которому нужны данные с сервера, создаётся контейнерный компонент, который отправляет AJAX запросы для получения этих данных, и передаёт их дочернему компоненту через свойства.

Когда использовать контейнерные компоненты:

- У вас глубокое дерево компонентов.
- Многие из ваших компонентов не требуют данных с сервера, но некоторым они нужны.
- Вы получаете данные из нескольких API.
- Вы не используете Redux/flux, или вы предпочитаете контейнерные компоненты вместо 'async actions'.

## 3. Redux Async Actions

Redux управляет данными, а AJAX предоставляет эти данные с сервера => ваш Redux код должен обрабатывать ваши сетевые запросы.

Когда использовать Redux Async Actions:

- Если вы используете Redux.
- Если вы используете другую реализацию flux, то подход будет аналогичным.

## 4. Relay

С Relay, вы указываете данные необходимые для ваших React компонентов с помощью GraphQL, а Relay автоматически загружает эти данные и заполняет ими свойства компонента.

Когда использовать Relay:

- Вы разрабатываете большое приложение.
- У вас ещё не разработан JSON API.
- Вы готовы настроить GraphQL сервер.
- Ваше приложение будет взаимодействовать только с одним сервером.

# HTTPS and Create React App

Чтобы обслуживать веб-приложения React, созданные create-react-app с помощью HTTPS, вам нужно сделать две вещи:

1. Измените сценарий запуска npm, чтобы установить для переменной среды HTTPS значение true.
2. Добавьте сертификат SSL для приложения в свое хранилище доверенных корневых центров сертификации.

```json
"scripts": { 
    "start": "set HTTPS = true && react-scripts start", 
    "build": "react-scripts build", 
    "test": "react-scripts test", 
    "eject": "react-scripts eject " 
}, 
```

SSL-сертификат:

- npm start
- Chrome Developer Tools >> Security >> View certificate >> Copy to File…
- DER encoded binary X.509 (.CER) >> Next
- double click on the certificate and install it
- Local Machine >> Next
- Place all certificates in the following store >> Next
- Trusted Root Certification Authorities >> Ok >> Finish

# AJAX

Вы можете сделать AJAX-запрос в componentDidMount. Когда вы получите данные, вызовите setState, чтобы передать их компоненту.
